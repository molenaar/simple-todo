# Story 1.1: Create the File Upload Interface

## Status
Draft

## Story
**As a** Developer,
**I want** a simple user interface on a dedicated admin page,
**So that** I can select a markdown file or paste markdown text to be uploaded.

## Acceptance Criteria
1. A new Astro component (`UploadInterface.astro`) is created.
2. The interface contains a file input for `.md` files and a `<textarea>`.
3. A "Submit" button and an "Overwrite existing file?" checkbox are present.

## Tasks / Subtasks
- [ ] Create UploadInterface.astro component (AC: 1)
  - [ ] Set up component structure with TypeScript interface for props
  - [ ] Add JSDoc comments for the component and its interface
  - [ ] Follow Astro component conventions from coding standards
- [ ] Implement file input for markdown files (AC: 2)
  - [ ] Create file input with accept=".md" attribute
  - [ ] Add proper ARIA labels for accessibility
  - [ ] Style with Tailwind CSS utility classes
- [ ] Implement textarea for markdown paste functionality (AC: 2)
  - [ ] Create textarea with appropriate size and styling
  - [ ] Add placeholder text for user guidance
  - [ ] Implement proper validation for non-empty content
- [ ] Add Submit button with proper styling (AC: 3)
  - [ ] Use Button component pattern from UI primitives if available
  - [ ] Apply primary variant styling consistent with design system
  - [ ] Add proper form submission handling
- [ ] Add Overwrite checkbox functionality (AC: 3)
  - [ ] Create checkbox input with clear labeling
  - [ ] Implement toggle state management
  - [ ] Style consistently with other form elements
- [ ] Add component-level validation and error handling
  - [ ] Validate that either file is selected OR textarea has content
  - [ ] Display user-friendly error messages
  - [ ] Handle file reading errors gracefully
- [ ] Write unit tests for component logic
  - [ ] Test file input validation
  - [ ] Test textarea validation
  - [ ] Test form submission logic
  - [ ] Test error handling scenarios

## Dev Notes

### Previous Story Insights
This is the first story in the project - no previous story context available.

### Component Architecture
**Component Organization** [Source: architecture/components.md#component-organization-strategy]:
- Place the UploadInterface.astro component in `app/src/components/features/` following the feature-specific component pattern
- Use Astro component (.astro) with TypeScript and Tailwind CSS for styling
- Follow component prop interface patterns with proper TypeScript annotations

**Astro Component Standards** [Source: architecture/frontend-architecture.md#astro-component-architecture]:
- Use `.astro` extension for Astro components
- Place styles at the bottom of component files
- Use TypeScript for component scripts
- Follow component prop interface patterns

### File Locations
**Source Tree Structure** [Source: architecture/source-tree.md#frontend-application-structure]:
- Component location: `app/src/components/features/UploadInterface.astro`
- Follow PascalCase naming convention for Astro components
- Place any related TypeScript interfaces in `app/src/types/index.ts`

### UI Component Guidelines
**Button Component Pattern** [Source: architecture/frontend-architecture.md#component-organization-strategy]:
- Use reusable UI primitives from `app/src/components/ui/`
- Button variants available: 'primary' | 'secondary' | 'danger'
- Button sizes available: 'sm' | 'md' | 'lg'
- Follow accessibility patterns with proper focus management

### Styling Standards
**CSS/Tailwind Standards** [Source: architecture/coding-standards.md#css-tailwind-standards]:
- Use Tailwind utility classes primarily
- Create custom components in @layer components for reusable patterns
- Use semantic HTML elements
- Ensure accessibility with proper ARIA labels

**Design System** [Source: architecture/tech-stack.md#key-technology-decisions]:
- Tailwind CSS v4+ for utility-first styling with design system
- Built-in design system ensures consistency
- Excellent dark/light theme support

### Form Handling
**TypeScript Standards** [Source: architecture/coding-standards.md#typescript-standards]:
- Use explicit type annotations for function parameters and return types
- Handle errors gracefully with try-catch blocks
- Use ES6+ features consistently including template literals

### Testing Requirements
**Testing Strategy** [Source: architecture/testing-strategy.md#unit-testing-implementation]:
- Test file location: `app/src/components/features/__tests__/UploadInterface.test.ts`
- Use Vitest and Testing Library for component testing
- Target 90% unit test coverage for component logic
- Test validation, error handling, and user interactions
- Mock file input and form submission for reliable testing

**Testing Framework** [Source: architecture/testing-strategy.md#testing-pyramid-coverage-goals]:
- Tools: Vitest, Testing Library, JSDOM
- Focus on validation, business logic, and component interactions
- Follow testing pyramid with emphasis on unit tests

### Technical Constraints
**Technology Stack** [Source: architecture/tech-stack.md#technology-stack-table]:
- Frontend Language: TypeScript 5.3+ with strict mode
- Frontend Framework: Astro 5.0+ with .astro file components
- UI Components: Native Astro Components with TypeScript
- CSS Framework: Tailwind CSS 4.0+ utility-first styling
- Testing: Vitest 2.0+ for unit testing

## Testing

### Testing Standards
- **Test file location**: `app/src/components/features/__tests__/UploadInterface.test.ts`
- **Testing frameworks**: Vitest, Testing Library, JSDOM
- **Coverage target**: 90% for component logic and validation
- **Test focus areas**:
  - File input validation (accept .md files only)
  - Textarea validation (non-empty content)
  - Form submission handling
  - Error state management
  - Checkbox state management
  - Accessibility features (ARIA labels, keyboard navigation)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-08 | 1.0 | Initial story creation | Scrum Master |
| 2025-09-08 | 1.1 | Updated persona from Content Manager to Developer | Scrum Master |
